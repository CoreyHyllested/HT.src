{% extends 'sc-header.html' %}
{% set meta_title	= 'Update your Soulcrafting settings.' %}
{% set meta_desc	= 'Update your Soulcrafting settings.' %}

{% block header_css %}
	{# super() #}
	<link rel='stylesheet' href='/static/css/bootstrap.css'>
	{%- assets "master", "scss_settings" %}<link rel='stylesheet' href='{{ASSET_URL}}'>{%- endassets %}
{% endblock %}



{% block content %}
<section id='settings-content'>
	<div><h3>Account Settings</h3></div>

	<form id='settings-form' enctype="multipart/form-data">
		{{form.hidden_tag()}}
		<input type='hidden' id='csrf'	  value='{{csrf_token()}}'>
		<input type='hidden' id='nexturl' value='{{nexturl}}'>

		<div id='update-name'>
			<div class='field info'>Your legal name</div>
			<div class='field error'></div>
			{{form.name(placeholder="Your Name", class="field input")}}
		</div>

		<div id='update-email'>
			<div class='field info'>Your email address</div>
			<div class='field error'></div>

			{{form.email(placeholder="Your Email", class='field input')}}
{#			<div class='field action'>
				{% if verified_email == True %}
					<div id='email-verified'><i class="fa fa-fw fa-check"></i>&nbsp;Verified</div>
				{% else %}
					<button id='btn-get-verified' class="whiteButton">Get Verified</button>
					<div id="verify-notice"></div>
				{% endif %}
			</div>
			<div class='empty' id='verify-email'>
				<input type="text" id="challenge" placeholder="Enter verification code." class="field input left">
				<div class='field action'>
					<button id='btn-validate-code' class="whiteButton">Submit Code</button>
				</div>
			</div>
#}
		</div>

		<div id='update-password'>
			<div class='field info'>Update your password</div>
			<div class='field error'></div>
			{{form.update_password(placeholder="New password",    class="field input", autocomplete="off")}}
			{{form.verify_password(placeholder="Verify password", class="field input", autocomplete="off")}}
		</div>

		<div id='current-password'>
			<div class='field info notice'>Enter current password to save changes</div>
			<div class='field error'></div>
			{{form.current_password(placeholder="Current password", class="field input", autocomplete="off")}}
		</div>
	</form>

	<div>
		<button class='btn-settings blueButton'	 id='btn-save'>Save Settings</button>
		<button class='btn-settings whiteButton' id='btn-back'>Go Back</button>
		<div id='settings-status'></div>
	</div>
</section>
{% endblock %}


{% block scripts %}
	{{ super() }}
	<script src="/static/js/settings.js"></script>
	<script src="/static/js/forms.js"></script>
	{% if errmsg != none %}<script>openAlertWindow('{{usrmsg}}');</script>{% endif %}
	{#
	<script>
	var verifiedEmail = '{{verified_email}}';

	if (verifiedEmail === 'True') {
		$('#btn-get-verified').hide();
		$('#email-verified').show();
	} else {
		$('#btn-get-verified').show();
		$('#email-verified').hide();
	}
	</script>
	#}
{% endblock %}
