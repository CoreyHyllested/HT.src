{% extends 'sc_header.html' %}
{% set title='Edit your Settings' %}

{% block header_css %}
	{{ super() }}
	{% assets "sass_settings" %}
	<link rel='stylesheet' href='{{ASSET_URL}}'></script>
	{% endassets %}	
{% endblock %}



{% block content %}
<div id='settings-content'>
	<div id="settings-title">Account Settings</div>

	<form id='settings-form' enctype="multipart/form-data">
		{{form.hidden_tag()}}
		<input type="hidden" id="csrf"	  value='{{csrf_token()}}'>
		<input type="hidden" id="nexturl" value='{{nexturl}}'>

		<div class='field-container' id='update-name'>
			<div class='field info'>Your legal name</div>
			<div class='field error'></div>
			{{form.name(placeholder="Your Name", class="field input span9")}}
		</div>

		<div class='field-container' id='update-email'>
			<div class='field info'>Your email address</div>
			<div class='field error'></div>
			{{form.email(placeholder="Your Email", class="field input span9 left")}}


			<div class='field action'>
				{% if verified_email == True %}
					<div id='email-verified'><i class="fa fa-fw fa-check"></i>&nbsp;Verified</div>
				{% else %}
					<button id='btn-get-verified' class="whiteButton">Get Verified</button>
				{% endif %}
			</div>
		</div>

		<div class='field-container' id='verify-email'>
			<div id="verify-notice"></div>
			<input type="text" id="challenge" placeholder="Enter your verification code here." class="field input span9 left">
			<div class='field action'>
				<button id='btn-validate-code' class="whiteButton">Submit Code</button>
			</div>
		</div>

		<br>
		<div class='field-container' id='update-password'>
			<div class='field info'>Update your password</div>
			<div class='field error'></div>
			{{form.update_password(placeholder="New password",    class="field input span9", autocomplete="off")}}
			{{form.verify_password(placeholder="Verify password", class="field input span9", autocomplete="off")}}
		</div>

		<div class='field-container' id='current-password'>
			<div class='field info notice'>Enter current password to save changes.</div>
			<div class='field error'></div>
			{{form.current_password(placeholder="Current password", class="field input span9", autocomplete="off")}}
		</div>
	</form>

	<div id='settings-actions' class='field-container'>
		<div id="settings-btn-container">
			<button class='btn-settings span4 blueButton ' id='btn-save'>Save Settings</button>
			<button class='btn-settings span4 whiteButton' id='btn-back'>Go Back</button>
		</div>
		<div id="settings-status"></div>
	</div>
</div>
{% endblock %}


{% block scripts %}
	{{ super() }}
	<script src="/static/js/settings.js"></script>
	<script src="/static/js/forms.js"></script>
	{% if errmsg != none %}<script>openAlertWindow('{{usrmsg}}');</script>{% endif %}
	<script>

	var verifiedEmail = '{{verified_email}}';

	if (verifiedEmail === 'True') {
		$('#btn-get-verified').hide();
		$('#email-verified').show();
	} else {
		$('#btn-get-verified').show();
		$('#email-verified').hide();
	}
	</script>
{% endblock %}
