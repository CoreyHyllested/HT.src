{% extends "ht_header.html" %}

{% block head %}
	{{ super() }}
	<link type="text/css" rel="stylesheet" href="/static/css/compose.css">
	<link type="text/css" rel="stylesheet" href="/static/css/profile.css">
	<link type="text/css" rel="stylesheet" href="/static/css/lightbox.css">
	<link type="text/css" rel="stylesheet" href="/static/css/dropzone.css">
{% endblock %}


{% block content %}
<div class="profileContentWrapper">
	
	<div class="profileHeaderColumn">
		<div class="profilePicContainer">
			<img class="profilePic" src="https://s3-us-west-1.amazonaws.com/htfileupload/htfileupload/{{hp.prof_img}}">
		</div>
	</div>


	<div class="profileLeftColumn">
		<div class="profileNameHeadline">
			<h1>{{hp.prof_name}}</h1>
			<h2>{{hp.headline| default('No headline')}}</h2>
			<h3>${{hp.prof_rate}}</h3>
		</div>
		<div class="profileMobileBlock">
			{% if hp is sameas bp %}
			<form method="link" action="/profile/edit">
				<input type="submit" class="whiteButton" value="Edit Profile">
			</form>

			{% else %}

			<form method="link" action="/schedule" method="POST">
				<input type="hidden" name="hp" value="{{hp.prof_id}}">
				<input type="submit" class="blueButton" value="Schedule meeting...">
			</form>

			{% endif %}
			<div class="profileBasicInfo">
				<div class="profileInfoBox"><img src="/static/img/facebook_thumbnails.jpg"></div>
				<div class="profileInfoBox">{{hp.location}}</div>
				<div class="profileInfoBox">{{hp.industry}}</div>
				<div class="profileInfoBox">
					{% if hp.reviews == 0 %}
						No Reviews
					{% elif hp.reviews == 1 %}
						{{ '%0.1f' | format(hp.rating|float) }} out of 5 stars <a href="#reviews">({{hp.reviews}} Review)</a>
					{% else %}
						{{ '%0.1f' | format(hp.rating|float) }} out of 5 stars <a href="#reviews">({{hp.reviews}} Reviews)</a>
					{% endif %}
				</div>
				<!-- <div class="profileInfoBox"><a href="{{hp.prof_url}}" target="_blank">Personal Website</a></div> -->
			</div>
		</div>
		<div class="profileAboutMe italic">{{hp.prof_bio}}</div>

		{% if lessons|count == 0 %}
			<h3>There are no lessons for this person yet.</h3>
		{% else %}

			{% for lesson in lessons %}

				<h3><a href="/lesson/{{lesson.lesson_id}}">{{lesson.lesson_title}}</a></h3><br>

			{% endfor %}
			
		{% endif %}

		{% if reviews|count == 0 %}
		<h3>There are no reviews for this person yet.</h3>
		{% else %}

		<div class="profileReviews" id="reviews">
				<div class="profileReviewsInfo">
				<h3>Reviews ({{reviews|length}})</h3>
			</div>
			<div class="profileLatestReviews">

				{% for review in reviews %}
				<!-- The individual review box starts here -->
				<div class="profileReviewBox">
					<div class="profileReviewLeft">
						<div class="profileReviewImageWrap">
							<!-- Social Media icon. -->
							{% if loop.index == 1 %}
							<div class="profileReviewImageFacebook"></div>
							{% endif %}
							<a href="/profile?hero={{review.display.prof_id}}">
								<img src="https://s3-us-west-1.amazonaws.com/htfileupload/htfileupload/{{review.display.prof_img}}">
							</a>
						</div>
						
						<div class="profileReviewLeftNameHeadline">
							<a href="/profile?hero={{review.display.prof_id}}">
								<h3>{{review.display.prof_name}}</h3>
								<h4>{{review.display.headline}}</h4>
							</a>
						</div>
					</div>
					<div class="profileReviewRight">
						<div class="profileReviewRating">
							<div class="profileReviewRatingLabels">
								Overall Value<br>
								Promptness<br>
								Communication
							</div>
							<div class="profileReviewRatingDivider"></div>
							<div class="profileReviewRatingBars">

								<!-- Overall Value -->
								<div class="profileReviewRatingBar">
									{% if review.Review.appt_score == 1 %}
										<div class="profileReviewRatingBarFillOne"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.appt_score}}/5</div>
									{% elif review.Review.appt_score == 2 %}
										<div class="profileReviewRatingBarFillTwo"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.appt_score}}/5</div>
									{% elif review.Review.appt_score == 3 %}
										<div class="profileReviewRatingBarFillThree"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.appt_score}}/5</div>
									{% elif review.Review.appt_score == 4 %}
										<div class="profileReviewRatingBarFillTwo"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.appt_score}}/5</div>
									{% elif review.Review.appt_score == 5 %}
										<div class="profileReviewRatingBarFillFive"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.appt_score}}/5</div>
									{% endif %}
								</div>

								<!-- Promptness goes here -->
								<div class="profileReviewRatingBar">
									{% if not review.Review.score_attr_time %}
										<div class="profileReviewRatingBarFillZero"></div>
										<div class="profileReviewRatingNumerical">n/a</div>
									{% elif review.Review.score_attr_time == 1 %}
										<div class="profileReviewRatingBarFillOne"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_time}}/5</div>
									{% elif review.Review.score_attr_time == 2 %}
										<div class="profileReviewRatingBarFillTwo"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_time}}/5</div>
									{% elif review.Review.score_attr_time == 3 %}
										<div class="profileReviewRatingBarFillThree"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_time}}/5</div>
									{% elif review.Review.score_attr_time == 4 %}
										<div class="profileReviewRatingBarFillFour"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_time}}/5</div>
									{% elif review.Review.score_attr_time == 5 %}
										<div class="profileReviewRatingBarFillFive"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_time}}/5</div>
									{% else %}
										<div class="profileReviewRatingNumerical"> SubZero </div>
									{% endif %}
								</div>

								<!-- Communication -->
								<div class="profileReviewRatingBar">
									{% if not review.Review.score_attr_comm %}
									  <div class="profileReviewRatingBarFillZero"></div>
									  <div class="profileReviewRatingNumerical"> n/a </div>
									{% elif review.Review.score_attr_comm == 1 %} 
										<div class="profileReviewRatingBarFillOne"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_comm}}/5</div>
									{% elif review.Review.score_attr_comm == 2 %} 
										<div class="profileReviewRatingBarFillTwo"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_comm}}/5</div>
									{% elif review.Review.score_attr_comm == 3 %} 
										<div class="profileReviewRatingBarFillThree"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_comm}}/5</div>
									{% elif review.Review.score_attr_comm == 4 %} 
										<div class="profileReviewRatingBarFillFour"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_comm}}/5</div>
									{% elif review.Review.score_attr_comm == 5 %} 
										<div class="profileReviewRatingBarFillFive"></div>
										<div class="profileReviewRatingNumerical">{{review.Review.score_attr_comm}}/5</div>
									{% endif %}
								</div>
								<!--div> {{review.appt.prop_ts.strftime('%B %Y')}} </div-->
							</div>
						</div>
						<div class="profileReviewBoxText">{{review.Review.generalcomments}}</div>
					</div>
					<div class="clear"></div>
				</div>
				{% endfor %}

			</div>
			<div class="profileReviewsInfo"></div>
		</div>
		{% endif %}
	</div>

	<div class="profileRightColumn">
		<div class="profilePriceBox">
			<span>$</span>
			<h1 id="profilePriceBoxRate">{{hp.prof_rate}}</h1>
			<div class="perHour">per<br>hour</div>
		</div>

		<button type="button" id="sendModalMessage" class="blueButton sendModalMessage">Message Me</button>

		<form method="link" action="/schedule" method="POST">
			<input type="hidden" name="hp" value="{{hp.prof_id}}">
			<input type="submit" class="blueButton scheduleMtgButton" value="Schedule Meeting...">
		</form>

		<div class="profileBasicInfo">
				<!-- <div class="profileInfoBox profileInfoFacebookSocial"><img src="/static/img/facebook_thumbnails.jpg"></div> -->
				<div class="profileInfoBox profileInfoLocation">{{hp.location}}</div>
				<div class="profileInfoBox profileInfoIndustry">{{hp.industry}}</div>
				<div class="profileInfoBox profileInfoRating">
					{% if hp.reviews == 0 %}
						No Reviews
					{% elif hp.reviews == 1 %}
						{{ '%0.1f' | format(hp.rating|float) }} out of 5 stars <a href="#reviews">({{hp.reviews}} Review)</a>
					{% else %}
						{{ '%0.1f' | format(hp.rating|float) }} out of 5 stars <a href="#reviews">({{hp.reviews}} Reviews)</a>
					{% endif %}
				</div>
				<!-- <div class="profileInfoBox"><a href="{{hp.prof_url}}" target="_blank">Personal Website</a></div> -->
		</div>

		<div class="profilePortfolio">
			
			<!--a href="/static/img/portfolio_acroyoga.jpg" data-lightbox="portfolio" data-title="I've been a certified acroyoga instructor for 10 years now." class="profilePortfolioImage acroyoga"></a-->
			{% for img in portfolio %}
				<a href="https://s3-us-west-1.amazonaws.com/htfileupload/htfileupload/{{img.img_id}}" style="background: url('https://s3-us-west-1.amazonaws.com/htfileupload/htfileupload/{{img.img_id}}') no-repeat center center; background-size:cover;" data-lightbox="portfolio" data-title="{{img.img_comment}}" class="profilePortfolioImage" ></a></li>

			{% endfor %}
		</div>

	</div>

	<div class="clear"></div>
</div>

<script src="/static/js/lightbox.min.js"></script>
<script src="/static/js/dropzone.js"></script>
<script src="/static/js/sendmsg.js"></script>
<script>

$(document).ready(function() {

	$('#sendModalMessage').click(function(e) {
		e.preventDefault();
		var dataObj = new Object();
		dataObj.hp = "{{hp.prof_id}}";
		dataObj.next = "modal";

		var myString = JSON.stringify(dataObj);
		openModalWindow("/compose", ".composeWrapper", myString);	

	});

});

</script>

{% endblock %}
