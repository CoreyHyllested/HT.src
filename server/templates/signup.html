{% extends "sc_header.html" %}
{% set title = 'Sign Up for Soulcrafting' %}

{% block header_css %}
	{{ super() }}
	{% assets 'scss_loginsys' %} <link rel='stylesheet' href='{{ASSET_URL}}'> {% endassets %}
{% endblock %}


{% block content %}
<section id='authorize'>
	<h2 class="text-center">Sign Up for Soulcrafting</h2>

	<div class='social-btns'>
		<ul class='social-login list-unstyled'>
			<li><a href="/signup/facebook"><button class="facebook-btn btn" type="button"><i class="fa fa-facebook"></i>Sign Up with Facebook</button></a></li>
		</ul>
		{% if ref_name %} <label class='text-center'>Referred by {{ref_name}}</label> {% endif %}
	</div>
	<hr>

	<div id='authorize-form'>
		<form action="/join" method="POST" id='signup-form' class="signup-form">
			{{form.hidden_tag()}}
			{{form.refid}}

			<div class="form-group username">
				<label class="sr-only" for="uname">Your name</label>
				{{form.uname(type="name", class="form-control login-uname", Placeholder="Your name")}}
			</div>
			<div class="form-group email">
				<label class="sr-only" for="email">Your email</label>
				{{form.email(type="email", class="form-control login-email", Placeholder="Your email")}}
			</div>
			<div class="form-group password">
				<label class="sr-only" for="passw">Your password</label>
				{{form.passw(type="password", class="form-control login-password", Placeholder="Your password")}}
			</div>
			<button type="submit" class="btn btn-block blueButton">Sign Up for Soulcrafting</button>
			<br>
		</form>
		<p><a href='/login'><button class='btn btn-block whiteButton'>I have an account</button></a></p>
	</div>
</section>
{% endblock %}

<script src="/static/js/jquery.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
{% block scripts %}
	{{ super() }}

<script>
	$(document).ready(function() {
		$(".form-control").blur(function (e) {
			$(this).removeClass('attention');
		});

		$('.btn-signup').click(function(e) {
			var errors = 0;
			var uname = document.forms["signup-form"]["uname"];
			var email = document.forms["signup-form"]["email"];
			var passw = document.forms["signup-form"]["passw"];

			if (uname.value == '') {	$(uname).addClass('attention');	errors++;	}
			if (email.value == '') {	$(email).addClass('attention');	errors++;	}
			if (passw.value == '') {	$(passw).addClass('attention');	errors++;	}
			if (errors) {
				console.log('Had ' + errors + ' errors');
				return false;
			}

			return true;
		});
	});
</script>
{% endblock %}


# TODO.  Fix the responsive issues.  Allow err-msgs.
# 1) Social-login btns are too big when shrunk down (min-width is set to 220px).  Change this when we shrink.
# 2) There is a gigantic whitespace between the social login and email login; minimize this when we shrink.
# 3) When user signs up (again).  No error msg pops-up suggesting to login.  Make this happen.

