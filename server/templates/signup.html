{% extends "sc_header.html" %}
{% set title = 'Sign Up for Soulcrafting' %}

{% block header_css %}
	{{ super() }}
	<link rel='stylesheet' href='/static/css/authorize.css'>
{% endblock %}


{% block content %}
<section class="signup-section access-section section">
	<div class="container">

		<div class="row">

			<div class="form-box col-md-8 col-sm-12 col-xs-12 col-md-offset-2 col-sm-offset-0 xs-offset-0">
				<div class="form-box-inner">
					<h2 class="title text-center">Sign Up for Soulcrafting</h2>
					<div class="row">
						<div class="col-md-6 col-sm-12 col-xs-12 col-md-offset-3 col-sm-offset-0 col-sm-offset-0">
							<div class='social-btns'>
								<ul class="list-unstyled social-login">
									<li><a href="/signup/facebook"><button class="facebook-btn btn" type="button"><i class="fa fa-facebook"></i>Sign Up with Facebook</button></a></li>
								</ul>
								{% if ref_name %} <label class='text-center'>Referred by {{ref_name}}</label> {% endif %}
							</div>


							<!--p class="note">By joining, you agree to the <a href="/terms/service">terms of service</a> and <a href="/terms/privacy">privacy policy</a>.</p-->
							<hr>

							<form action="/join" method="POST" id='signup-form' class="signup-form">
								<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
								{{form.refid}}

								<div class="form-group username">
									<label class="sr-only" for="uname">Your name</label>
									{{form.uname(type="name", class="form-control login-uname", Placeholder="Your name")}}
								</div>
								<div class="form-group email">
									<label class="sr-only" for="email">Your email</label>
									{{form.email(type="email", class="form-control login-email", Placeholder="Your email")}}
								</div>
								<div class="form-group password">
									<label class="sr-only" for="passw">Your password</label>
									{{form.passw(type="password", class="form-control login-password", Placeholder="Your password")}}
								</div>
								<button type="submit" class="btn btn-block blueButton">Sign Up for Soulcrafting</button>
								<br>
							</form>
							<p><a href='/login'><button class='btn btn-block whiteButton'>I have an account</button></a></p>
						</div>

						<!--Ending row-->
					</div>
				<!--End form-box-inner -->
				</div>
			</div>

		<!--End Row-->
		</div>
	</div>
</section>

{% endblock %}

<!--li><button class="twitter-btn btn"  type="button"><i class="fa fa-twitter"></i>Sign up with Twitter</button></li-->
<!--li><button class="google-btn btn"   type="button"><i class="fa fa-google-plus"></i>Sign up with Google</button></li-->

<script src="/static/js/jquery.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
{% block scripts %}
	{{ super() }}

<script>
	$(document).ready(function() {
		$(".form-control").blur(function (e) {
			$(this).removeClass('attention');
		});

		$('.btn-signup').click(function(e) {
			var errors = 0;
			var uname = document.forms["signup-form"]["uname"];
			var email = document.forms["signup-form"]["email"];
			var passw = document.forms["signup-form"]["passw"];

			if (uname.value == '') {	$(uname).addClass('attention');	errors++;	}
			if (email.value == '') {	$(email).addClass('attention');	errors++;	}
			if (passw.value == '') {	$(passw).addClass('attention');	errors++;	}
			if (errors) {
				console.log('Had ' + errors + ' errors');
				return false;
			}

			return true;
		});
	});
</script>
{% endblock %}


# TODO.  Fix the responsive issues.  Allow err-msgs.
# 1) Social-login btns are too big when shrunk down (min-width is set to 220px).  Change this when we shrink.
# 2) There is a gigantic whitespace between the social login and email login; minimize this when we shrink.
# 3) When user signs up (again).  No error msg pops-up suggesting to login.  Make this happen.

