{% extends "ht_header.html" %}

{% block head %}
	{{ super() }}
	<link type="text/css" rel="stylesheet" href="/static/css/search.css">
{% endblock %}

{% block content %}

<script src="static/js/format.js"></script>

<div class="searchWrapper">

	<div class="searchOptions">

		<h2>Search</h2>
		<form name='q' action=/search method=POST>
			<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

			{{form.keywords_field(placeholder="Keywords", id="searchOptionsKeywords")}}
			{{form.location_field(placeholder="Location", id="searchOptionsLocation")}}
			{{form.industry_field(placeholder="Industry", id="searchOptionsIndustry")}}

			{{form.rate_from_field(onkeypress="return isNumberKey(event)", placeholder="Min price (USD)", id="searchOptionsMinRate")}}
			{{form.rate_to_field(onkeypress="return isNumberKey(event)", placeholder="Max price (USD)", id="searchOptionsMaxRate")}}

			<input type="submit" class="whiteButton" value="Search">
		</form>
	</div>


	<div class="searchResults">
		<div class="searchResultsHeading">
			<div class="searchResultsHeadingH2"><h2>{{rc_heroes}} People Found</h2></div>
			<div class="searchOptionsMenu">Filter</div>
		</div>

		{% for hero in heroes %}
		<div class="searchListing">
			
			<a class="searchListingImage" href='/profile?hero={{hero.prof_id}}' style="		background: url('https://s3-us-west-1.amazonaws.com/htfileupload/htfileupload/{{hero.prof_img}}') no-repeat center center; background-size: cover;" onclick="document.getElementById('h').value='{{hero.prof_id}}'; document.p.submit();">
				
			</a>


			<div class="searchListingInfo">
				<table class="searchListingTable">
					
					<tr>
						<td colspan="2">
							<a href="#" onclick="document.getElementById('h').value='{{hero.prof_id}}'; document.p.submit();"><h3>{{hero.prof_name}}</h3></a>
							<span class="searchListingTableHeading">{{hero.headline}}</span>
						</td>
					</tr>

					
					<tr>
						<td class="searchListingTableReviews" colspan="2">
							{% if hero.reviews %}
									{{'%0.1f' | format(hero.rating|float)}} out of 5 stars <a href="/profile?hero={{hero.prof_id}}">({{hero.reviews}} reviews)</a>
							
							{% else %}
								No reviews
							{% endif %}
						</td>
					</tr>
					
					<tr class="searchListingTableLastRow">
						<td>{{hero.industry}}</td>
						<td class="searchListingTablePrice"><strong>${{'{0:,}'.format(hero.prof_rate)}}</strong> / hour</td>
					</tr>

				</table>
			</div>

		</div>
		{% endfor %}
	</div>
	<div class="clear"></div>
</div>

{% endblock %}
